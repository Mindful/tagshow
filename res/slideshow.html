<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="cycle2.js"></script>
    <script type="text/javascript" src="fullscreen.js"></script>
    <script>
    var alphabet = new RegExp(/^[A-z]+$/)

    $( document ).ready(function(){
      $('img').each(function(){
        var img = $(this); 
        img.data('maxheight', img.height() );
        img.data('maxwidth', img.width() );
      });
      $("#slideshow").cycle();
      //sizeImages();
    });

    $(document).bind("fullscreenchange", function(){
      //setTimeout(function(){sizeImages();}, 250); //Have to wait, this event fires with the old viewport values
    });

    function sizeImages(){
      console.log("resize images");
      var viewportWidth = $(window).width();
      var viewportHeight = $(window).height();
      $('img').each(function(){
        var img = $(this);
        var height = img.data('maxheight');
        var width = img.data('maxwidth');
        var aspectRatio = width/height;
        img.height(Math.min(height, viewportHeight));
        img.width(aspectRatio * img.height());

        if(img.width > viewportWidth){
          img.width(viewportWidth);
          img.height(img.width() / aspectRatio);
        }

        img.css("margin-left", (viewportWidth - img.width())/2);
        img.css("margin-top:", (viewportHeight - img.height())/2);
      });
    }

    $( document ).keydown(function(event) {
        var char = String.fromCharCode(event.which);
        if(alphabet.test(char)){
          $("#slideshow").toggleFullScreen();
        }
    });
    </script>
    <style>
    #slideshow { width: 100%;} div {background-color: black;} body {background-color: black;}
    img {width:100%; height:100%;}
    </style>
  </head>
  <body>
    <div id="slideshow" data-cycle-auto-height=true data-cycle-fx="fade">
        <img src="1.jpg">
        <img src="2.jpg">
        <img src="3.jpg">
        <img src="4.jpg">
    </div>
  </body>
</html>


<!--
http://stackoverflow.com/questions/7836204/chrome-fullscreen-api
"The API only works during user interaction, so it cannot be used maliciously."
Also so that it mysteriously fails if you try and do it, say, on pageload.
-->
